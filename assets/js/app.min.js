new LazyLoad({elements_selector:".lazy"}),function(){for(var e=document.querySelectorAll(".ibg"),t=0;t<e.length;t++)e[t].querySelector("img")&&(e[t].style.backgroundImage="url("+e[t].querySelector("img").getAttribute("src")+")")}(),window.myLib={},window.myLib.body=document.querySelector("body"),window.myLib.closestAttr=function(e,t){for(var r=e;r;){var i=r.getAttribute(t);if(i)return i;r=r.parentElement}return null},window.myLib.closestItemByClass=function(e,t){for(var r=e;r;){if(r.classList.contains(t))return r;r=r.parentElement}return null},window.myLib.toggleScroll=function(){myLib.body.classList.toggle("no-scroll")},function(){if(!window.matchMedia("(max-width: 992px)").matches){var e=document.querySelector(".header");window.addEventListener("scroll",function(){0<window.pageYOffset?e.classList.add("is-active"):e.classList.remove("is-active")})}}(),function(){function i(e){e.classList.remove("is-active")}myLib.body.addEventListener("click",function(e){var t=e.target,r=myLib.closestAttr(t,"data-popup");if(null!==r){e.preventDefault();var i=document.querySelector("."+r);i&&(i.classList.add("is-active"),myLib.toggleScroll())}}),myLib.body.addEventListener("click",function(e){var t=e.target;if(t.classList.contains("popup-close")||t.classList.contains("popup__inner")){var r=myLib.closestItemByClass(t,"popup");i(r),myLib.toggleScroll()}}),myLib.body.addEventListener("keydown",function(e){if(27===e.keyCode){var t=document.querySelector(".popup.is-active");t&&(i(t),myLib.toggleScroll())}})}(),myLib.body.addEventListener("click",function(e){var t=e.target,r=myLib.closestAttr(t,"data-scroll-to");if(null!==r){e.preventDefault();var i,o,n=document.querySelector("."+r);n&&(i=n.getBoundingClientRect().top+window.pageXOffset,o=document.querySelector(".header").clientHeight,window.scrollTo(0,i-o))}}),function(){var e=document.querySelector(".section-catalog");if(null!==e){function a(e,t){!function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(e);for(var r=0;r<t.length;r+=1)e.appendChild(t[r])}var s=e.querySelector(".section-catalog__item"),l=e.querySelector(".catalog__filter"),u=e.querySelectorAll(".catalog__item");l.addEventListener("click",function(e){var t=e.target,r=myLib.closestItemByClass(t,"filter__btn");if(null!==r&&!r.classList.contains("is-activ")){e.preventDefault();var i=r.getAttribute("data-filter");if(l.querySelector(".filter__btn.is-active").classList.remove("is-active"),r.classList.add("is-active"),"all"!==i){for(var o=[],n=0;n<u.length;n+=1){var c=u[n];c.getAttribute("data-category")===i&&o.push(c)}a(s,o)}else a(s,u)}})}}(),function(){var e=document.querySelector(".section-catalog__item");if(null!==e){e.addEventListener("click",function(e){var t,r,i,o,n,c,a,s,l,u,d,m,y=e.target;y.classList.contains("size__btn")&&(e.preventDefault(),t=y,i=myLib.closestItemByClass(t,"catalog__item"),o=i.querySelector(".size__btn.is-active"),n=t.getAttribute("data-product-size-price"),o.classList.remove("is-active"),t.classList.add("is-active"),r=n,i.querySelector(".item__price").textContent=r),y.classList.contains("item__btn")&&!y.classList.contains("is-active")&&(e.preventDefault(),c=y,a=myLib.closestItemByClass(c,"catalog__item"),s=document.querySelector(".popup__order"),l=a.querySelector(".item__title").textContent,u=a.querySelector(".size__btn.is-active").textContent,d=a.querySelector(".item__price").textContent,m=a.querySelector(".item__img-src").getAttribute("src"),s.querySelector(".order__info-title").setAttribute("value",l),s.querySelector(".order__info-size").setAttribute("value",u),s.querySelector(".order__info-price").setAttribute("value",d),s.querySelector(".order__product-title").textContent=l,s.querySelector(".order__product-price").textContent=d,s.querySelector(".order__info-title").textContent=u,s.querySelector(".order__img-src").setAttribute("src",m))})}}(),function(){function o(){"undefined"!=typeof ymaps&&ymaps.ready(function(){var e=new ymaps.Map("ymap",{center:[55.755241,37.617779],zoom:16},{searchControlProvider:"yandex#search"}),t=new ymaps.Placemark(e.getCenter(),{balloonContent:"г. Москва, Преображенская площадь, 8"},{iconLayout:"default#image",iconImageHref:"assets/img/map/pizza.svg",iconImageSize:[40,63.2],iconImageOffset:[-50,-38]});e.geoObjects.add(t),e.behaviors.disable("scrollZoom")})}var n=document.querySelector(".map"),c=function(){var e,t=n.getBoundingClientRect().top,r=window.pageYOffset,i=r+t;r+window.innerHeight>i&&((e=document.createElement("script")).src="https://api-maps.yandex.ru/2.1/?lang=en_RU",myLib.body.appendChild(e),e.addEventListener("load",o),window.removeEventListener("scroll",c))};window.addEventListener("scroll",c),c()}(),function(){var e=document.querySelectorAll(".form-send");if(0!==e.length)for(var t=0;t<e.length;t+=1)e[t].addEventListener("submit",function(e){e.preventDefault();var t,r,i,o=e.currentTarget;r=function(e){for(var t=e.querySelectorAll("input, select, textarea"),r="",i=0;i<t.length;i+=1){var o=t[i],n=o.name,c=o.value;c&&(r+=(0===i?"":"&")+n+"="+c)}return r}(t=o),(i=new XMLHttpRequest).open("POST","assets/mail/mail.php"),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.onload=function(){var e=document.querySelector(".popup.is-active");e?e.classList.remove("is-active"):myLib.toggleScroll(),"success"===i.response?document.querySelector(".popup__successfully").classList.add("is-active"):document.querySelector(".popup__error").classList.add("is-active"),t.reset()},i.send(r)})}();